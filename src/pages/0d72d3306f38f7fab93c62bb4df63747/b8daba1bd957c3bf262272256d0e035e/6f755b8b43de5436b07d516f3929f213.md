---
title: 2.x对比
size: 1822
---
| Options API                         | Composition API                         |     |
| ----------------------------------- | --------------------------------------- | --- |
| 不利于复用                               | 更易复用、可测试（js函数）                          |     |
| 命名冲突                                | 灵活组合                                    |     |
| 上下文丢失                               | 更好的上下文支持                                |     |
| 有限的类型支持                             | TS类型支持                                  |     |
| 按api进行组织（比如所有的methods、computed、etc） | 按功能、逻辑，将组件中相互关联的部分拆分成更小的函数，不用强制按照生命周期划分 |     |
|                                     | 代码体积更小                                  |     |
|                                     | 每个函数可独立进行使用，不必绑定vue，解耦                  |     |
##### 性能
- 实例化开销减少
  - 2.0 创建实例，需要暴露很多属性出来，而它们都是通过Object.defineProperty定义的
  - 3.0 丢掉了属性定义的过程，通过proxy动态拦截返回
- 对虚拟 DOM 进行了重写、对模板的编译进行了优化操作
  - 3.0 借助模板分析，动静分离，更新时候不需要重新创建相关节点
- TreeShaking
  - 2.0 大量的 API 挂载在 Vue 对象的原型上，难以实现 TreeShaking
- 响应式（追踪依赖）
  - 2.0 vue.observable
  - 3.0  reactivity

##### 功能
- TypeScript 支持
  - 所有属性都放在了 this 对象上，难以推导组件的数据类型
- Composition API
- Custom renderer API（自定义渲染）
- Teleport全局弹窗等
- 不限制单个根节点
