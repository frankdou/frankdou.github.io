---
title: 浏览器缓存
date: 2022-05-12T12:27:37.886Z
size: 1770
---
>缓存优化是性能优化中一种简单高效的优化方式，它可以显著减少网络传输所带来的损耗

- 直接使用缓存而不发起请求
- 发起请求，经检查未发生变化，不用将数据再回传，减少响应数据

#### 缓存方式

- Service Worker
  - 自由控制缓存逻辑
  - 未缓存主动获取
- Memory Cache
  - 内存缓存读取很高效，但缓存持续性很短，会随着进程的释放而释放
  - 优先存储小文件
  - 系统内存使用率高的，文件优先存储进硬盘
- Disk Cache
  - 根据请求header确认缓存逻辑
  - 覆盖面、容量、时效最大

#### 缓存策略

##### 强制缓存

浏览器不会发送请求，直接从本地缓存中读取文件

状态码：200

###### Expires 

http1.0

设置具体的过期时间

###### Cache-Control  

http1.1

优先级高于expires

设置有效期xxx秒

- no-store
  - 完全忽略本地缓存
- no-cache
  - 忽略本地缓存时间，但会从服务器重新验证
- max-age=`<seconds>`

##### 协商缓存

缓存过期，发起请求验证资源是否有更新，由服务器决定是否使用缓存

状态码：

- 缓存失效200
- 生效304

###### Etag

- Etag
  - 响应头
  - 文件指纹
- If-None-Match
  - 请求头
  - 会将当前Etag发送给服务器，询问该资源Etag是否变动，有变动的话就将新的资源发送回来
- 时间精度是毫秒
- 优先级高于Last-Modifed

###### Last-Modifed

- Last-Modifed
  - 响应头
  - 表示文件最后修改日期
- If-Modified-Since
  - 请求头
  - 会将Last-Modified的值发送给服务器，询问服务器在该日期后资源是否有更新
- 时间精度是秒
- 弊端
  - 打开文件，即使没有修改，也会造成Last-Modified被修改
