---
title: 基本原理
date: 2022-05-12T12:27:37.000Z
size: 1789
---
> HTTPS还是通过HTTP来传输信息，但是通过TLS协议进行了加密

#### 对称加密

通过秘钥加密、解密

#### 非对称加密

有公钥私钥之分

##### 公钥

可以公开

将数据用公钥加密

##### 私钥

只有分发公钥的一方知道

必须使用私钥解密

#### CA认证机构

浏览器、系统内置，进行证书验证

#### 基础逻辑

##### 客服端发请求

携带基础信息

- 支持的协议版本
- 支持的加密方法
- 支持的压缩方法
- 客户端生成的随机值

##### 服务器响应

- 确认协议版本
- 确认加密方法
- 发送证书
- 收到客户端的随机值，也产生一个随机值，稍后用于生成会话密钥

##### 客户端回应

- 证书验证有效
  - CA（浏览器、系统内置）
    - 对比摘要是否一致
    - 是否过期等
- 证书验证通过，再生成一个随机值，并通过证书的公钥加密发送给服务端
  - 防止被窃听

##### 服务器的最后回应

- 各自生成会话所用的会话密钥（通过三个随机数生成）

- 编码改变通知（后续使用商定好的对称加密方式、会话密钥进行通信）

  

#### tips：

##### 握手阶段

两端使用**非对称加密**的方式来通信，但是因为非对称加密损耗的性能比对称加密大

##### 正式传输数据

两端使用**对称加密**的方式通信

##### 为什么一定要用三个随机数，来生成密钥

由于SSL协议中证书是静态的，因此十分有必要引入一种随机因素来保证协商出来的密钥的随机性

##### 申请证书

- 生成服务器公钥、私钥
- 生成CSR文件（基本信息 + 公钥）
- 提交CSR文件至CA（根证书颁发机构），签发证书

##### 金融类

使用U盾等客户端证书
