---
title: CDN
date: 2022-04-14T12:00:22.560Z
size: 1198
---
##### CDN（Content Delivery Network）

##### 优点

- 提速
  - 将数据通过离用户最近、最顺畅的服务节点发送给用户
    - 各级运营商、路由器
    - 长距离时间成本
- 高可用度
  - 单点故障时，调用临近地区的服务器
  - 减少主服务器压力
  - waf
- 低成本
  - CDN服务器在不同区域，减少了互连的流量，降低了带宽成本



##### 逻辑

1. 权威dns，不是具体的ip地址，返回cname（别名记录），指向的是CDN GSLB（全局负载均衡）
2. 向GSLB发送请求，进入CDN全局负载均衡系统，开始智能调度
   - 根据用户ip，查表确定用户地理位置，找最近的边缘节点
   - 根据用户运营商网络，找相同运营商的边缘节点
   - 检查边缘节点的负载情况，找负载较轻的节点
   - etc
   - 
3. 一级缓存直连源站，二级缓存直连用户
   - 二级缓存没有，通过一级缓存直连源站



##### 命中率（越高越好）

用户访问的资源恰好在缓存系统里，可以返回给用户

##### 回源率（越低越好）

用户访问CDN集群上静态文件时，文件缓存过期，访问源站机器的行为



