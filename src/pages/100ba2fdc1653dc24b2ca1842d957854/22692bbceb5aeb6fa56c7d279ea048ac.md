---
title: axios请求取消
date: 2023-03-27T09:30:30.706Z
size: 827
---
##### 使用 CancelToken
```js
const source = axios.CancelToken.source();

axios.get('/api/data', {
  cancelToken: source.token
}).then((response) => {
  console.log(response.data);
}).catch((error) => {
  if (axios.isCancel(error)) {
    console.log('Request canceled', error.message);
  } else {
    console.log('Error', error.message);
  }
});

setTimeout(() => {
  source.cancel('Canceled by the user');
}, 2000);
```
##### 使用 AbortController
```js
const controller = new AbortController();

axios.get('/api/data', {
  signal: controller.signal
}).then((response) => {
  console.log(response.data);
}).catch((error) => {
  if (axios.isCancel(error)) {
    console.log('Request canceled', error.message);
  } else {
    console.log('Error', error.message);
  }
});

setTimeout(() => {
  controller.abort();
}, 2000);
```
