---
title: 闭包
date: 2022-05-12T12:27:37.797Z
size: 2222
---
#### 闭包

- 函数和对其周围词法环境的引用捆绑在一起构成闭包（实现外部作用域访问内部作用域中变量的方法）
- 高阶函数除了可以接受函数作为参数外，还可以把函数作为结果值返回

##### 用途

- 可以读取函数内部的变量
- 让变量的值始终保持在内存中

```js
var pet = function(name) { //外部函数定义了一个变量"name"
  var getName = function() {
    //内部函数可以访问 外部函数定义的"name"
    return name;
  }
  //返回这个内部函数，从而将其暴露在外部函数作用域
  return getName;
};
myPet = pet("Vivie");

myPet(); // 返回结果 "Vivie"
```


AI：
JS闭包是指在函数内部创建另一个函数，而内部函数能够访问外部函数的变量和参数，即使外部函数已经执行完毕，这种访问仍然存在。闭包可以使得函数内部的变量和方法不被外部访问，同时可以访问外部函数的变量和方法。

在JS中，当一个函数被调用时，会形成一个执行环境，该执行环境中包含了函数的参数、局部变量等信息。当函数执行完毕后，该执行环境会被销毁。但是，当内部函数被创建后，它会在其被调用时形成一个新的执行环境，该执行环境可以访问外部函数的变量和参数，因此闭包可以在外部函数执行完毕后仍然保持对外部函数的信息的访问。

闭包的应用非常广泛，例如可以用来实现模块化编程，可以将变量和方法封装在闭包中，从而避免全局变量的污染，也可以在异步编程中使用闭包来保存函数执行时的状态等。

需要注意的是，由于闭包会保留对外部函数的引用，因此如果闭包中定义了大量的变量和方法，且这些变量和方法都是指向外部函数的对象或者函数，那么这些对象和函数在闭包存在期间都不会被垃圾回收，这可能会导致内存泄漏的问题，因此在使用闭包时需要格外注意内存管理的问题。


Refs:

https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Functions#%E9%97%AD%E5%8C%85

https://www.liaoxuefeng.com/wiki/1022910821149312/1023021250770016
