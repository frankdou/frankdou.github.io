---
title: tips
size: 1096
---
复杂对象调试展示
https://react.formilyjs.org/zh-CN/api/hooks/use-field#%E7%94%A8%E4%BE%8B
```jsx
<code>
	<pre>
		<FormConsumer>
			{(form) => JSON.stringify(form.values, null, 2)}
		</FormConsumer>
	</pre>
</code>
```

获取value
```js
form.query('xxxx').value()
```

select异步搜索
https://antd5.formilyjs.org/zh-CN/components/select#markup-schema-%E5%BC%82%E6%AD%A5%E6%90%9C%E7%B4%A2%E6%A1%88%E4%BE%8B
```js
const useAsyncDataSource = (
  pattern,
  service
) => {
  const keyword = observable.ref('')

  // 添加search动态监听
  onFieldInit(pattern, (field) => {
    field.setComponentProps({
      onSearch: (value: string) => {
        keyword.value = value
      },
    })
  })

  // keyword发生变化，执行请求逻辑
  onFieldReact(pattern, (field: Field) => {
    field.loading = true
    service({ field, keyword: keyword.value }).then(
      action.bound?.((data) => {
        field.dataSource = data
        field.loading = false
      })
    )
  })
}
```

更新value
```js
form.setFieldState('xxxx', (state) => {
	state.setValue([
		{
			xxxx,
		}
	])
})
```
